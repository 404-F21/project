(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[262],{78463:function(K,p,e){"use strict";var c=e(85893);p.Z=function(P){return(0,c.jsx)("div",{children:(0,c.jsx)("h2",{style:{marginBottom:"20px"},children:P.title})})}},3484:function(K,p,e){"use strict";e.r(p);var c=e(71194),P=e(5644),u=e(47673),m=e(1011),W=e(89816),A=e(6109),R=e(82471),E=e(84283),B=e(49111),y=e(19650),U=e(57663),_=e(71577),s=e(34792),t=e(48086),a=e(2824),n=e(67294),r=e(73755),i=e(78463),v=e(30381),$=e.n(v),k=e(73171),o=e(85893);p.default=function(){var H=(0,n.useState)([]),Z=(0,a.Z)(H,2),z=Z[0],G=Z[1],J=(0,n.useState)(1),x=(0,a.Z)(J,2),C=x[0],V=x[1],Q=(0,n.useState)(0),j=(0,a.Z)(Q,2),X=j[0],q=j[1],ee=(0,n.useState)(new Map),w=(0,a.Z)(ee,2),T=w[0],te=w[1],ae=(0,n.useState)(!1),N=(0,a.Z)(ae,2),ne=N[0],h=N[1],re=(0,n.useState)(!1),b=(0,a.Z)(re,2),se=b[0],L=b[1],_e=(0,n.useState)(!1),Y=(0,a.Z)(_e,2),oe=Y[0],F=Y[1],O=function(d){h(!0),(0,r.bS)(d,9,"SHARE").then(function(l){if(l.code===200){var M=new Map,I=new Map;l.data.data.forEach(function(D){M.set(D.id,D),I.set(D.id,!1)}),te(M),G(l.data.data),V(d),q(l.data.total)}else t.default.error(l.message);h(!1)})};(0,n.useEffect)(function(){O(1)},[]);var de=[{title:"ID",dataIndex:"id",key:"id"},{title:"Host",dataIndex:"host",key:"host"},{title:"Create Time",dataIndex:"createTime",key:"createTime",render:function(d){return $()(d*1e3).format()}},{title:"If Approved",dataIndex:"ifApproved",key:"ifApproved",render:function(d){return d?"Approved":"Forbidden"}},{title:"Action",dataIndex:"id",key:"action",render:function(d){var l,M=function(){h(!0),(0,r.gY)(d,!T.get(d).ifApproved).then(function(g){g.code===200?(t.default.success("Change successfully!"),O(C)):t.default.error(g.message),h(!1)})},I=function(){h(!0),(0,r.IK)(d).then(function(g){g.code===200?(t.default.success("Delete successfully!"),O(C)):t.default.error(g.message),h(!1)})},D=(l=T.get(d))===null||l===void 0?void 0:l.ifApproved;return T.get(d)?(0,o.jsxs)(y.Z,{children:[D?(0,o.jsx)(_.Z,{type:"default",onClick:M,danger:!0,children:"Forbid"}):(0,o.jsx)(_.Z,{type:"default",onClick:M,children:"Permit"}),(0,o.jsx)(_.Z,{type:"primary",onClick:I,danger:!0,children:(0,o.jsx)(k.Z,{})})]}):(0,o.jsx)(o.Fragment,{})}}],ue=E.Z.useForm(),ie=(0,a.Z)(ue,1),S=ie[0];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{title:"Share Node List"}),(0,o.jsx)(_.Z,{type:"primary",onClick:function(){L(!0)},style:{width:"150px",marginBottom:"20px"},children:"Create Node"}),(0,o.jsx)(A.Z,{dataSource:z,columns:de,loading:ne,pagination:{defaultPageSize:9,defaultCurrent:C,total:X,showSizeChanger:!1,onChange:function(d){O(d)}}}),(0,o.jsx)(P.Z,{title:"Create New Share Node",visible:se,okButtonProps:{loading:oe},onOk:function(){S.submit()},onCancel:function(){L(!1)},children:(0,o.jsxs)(E.Z,{form:S,onFinish:function(d){F(!0),(0,r.dS)(d.host,d.password,"SHARE","").then(function(l){l.code===200?(t.default.success("Create successfully!"),L(!1),S.resetFields(),O(C)):t.default.error(l.message),F(!1)})},children:[(0,o.jsx)(E.Z.Item,{label:"Host Address",name:"host",rules:[{required:!0}],children:(0,o.jsx)(m.Z,{type:"text"})}),(0,o.jsx)(E.Z.Item,{label:"Access Password",name:"password",rules:[{required:!0}],children:(0,o.jsx)(m.Z,{type:"password"})})]})})]})}},73755:function(K,p,e){"use strict";e.d(p,{sK:function(){return W},f5:function(){return A},uV:function(){return R},bS:function(){return E},dS:function(){return B},IK:function(){return y},gY:function(){return U}});var c=e(3182),P=e(94043),u=e.n(P),m=e(21010),W=function(){var _=(0,c.Z)(u().mark(function s(t,a){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)("/service/admin/list/",{method:"GET",params:{current:t,pageSize:a}}));case 1:case"end":return r.stop()}},s)}));return function(t,a){return _.apply(this,arguments)}}(),A=function(){var _=(0,c.Z)(u().mark(function s(t,a){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)("/service/admin/password/",{method:"POST",data:{username:t,password:a}}));case 1:case"end":return r.stop()}},s)}));return function(t,a){return _.apply(this,arguments)}}(),R=function(){var _=(0,c.Z)(u().mark(function s(t,a){return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.WY)("/service/admin/create/",{method:"POST",data:{username:t,password:a}}));case 1:case"end":return r.stop()}},s)}));return function(t,a){return _.apply(this,arguments)}}(),E=function(){var _=(0,c.Z)(u().mark(function s(t,a,n){return u().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.WY)("/service/admin/node/list/",{method:"GET",params:{current:t,pageSize:a,type:n}}));case 1:case"end":return i.stop()}},s)}));return function(t,a,n){return _.apply(this,arguments)}}(),B=function(){var _=(0,c.Z)(u().mark(function s(t,a,n,r){return u().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,m.WY)("/service/admin/node/create/",{method:"POST",data:{host:t,password:a,type:n,username:r}}));case 1:case"end":return v.stop()}},s)}));return function(t,a,n,r){return _.apply(this,arguments)}}(),y=function(){var _=(0,c.Z)(u().mark(function s(t){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.WY)("/service/admin/node/delete/",{method:"GET",params:{id:t}}));case 1:case"end":return n.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),U=function(){var _=(0,c.Z)(u().mark(function s(t,a){var n;return u().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a?"1":"0",i.abrupt("return",(0,m.WY)("/service/admin/node/approved/",{method:"POST",data:{id:t,approved:n}}));case 2:case"end":return i.stop()}},s)}));return function(t,a){return _.apply(this,arguments)}}()}}]);
