(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[210],{78463:function(Z,E,e){"use strict";var m=e(85893);E.Z=function(h){return(0,m.jsx)("div",{children:(0,m.jsx)("h2",{style:{marginBottom:"20px"},children:h.title})})}},40425:function(Z,E,e){"use strict";e.r(E);var m=e(71194),h=e(5644),i=e(47673),l=e(1011),S=e(89816),T=e(6109),j=e(82471),f=e(84283),B=e(49111),y=e(19650),K=e(57663),u=e(71577),s=e(34792),a=e(48086),r=e(2824),o=e(78463),n=e(67294),d=e(73755),C=e(30381),g=e.n(C),W=e(73171),t=e(85893);E.default=function(){var k=(0,n.useState)([]),R=(0,r.Z)(k,2),z=R[0],J=R[1],G=(0,n.useState)(1),w=(0,r.Z)(G,2),A=w[0],V=w[1],Q=(0,n.useState)(0),b=(0,r.Z)(Q,2),X=b[0],q=b[1],ee=(0,n.useState)(new Map),N=(0,r.Z)(ee,2),I=N[0],te=N[1],ae=(0,n.useState)(!1),F=(0,r.Z)(ae,2),ne=F[0],v=F[1],re=(0,n.useState)(!1),Y=(0,r.Z)(re,2),se=Y[0],x=Y[1],_e=(0,n.useState)(!1),$=(0,r.Z)(_e,2),ue=$[0],H=$[1],P=function(_){v(!0),(0,d.bS)(_,9,"FETCH").then(function(c){if(c.code===200){var O=new Map,U=new Map;c.data.data.forEach(function(M){O.set(M.id,M),U.set(M.id,!1)}),te(O),J(c.data.data),V(_),q(c.data.total)}else a.default.error(c.message);v(!1)})};(0,n.useEffect)(function(){P(1)},[]);var oe=[{title:"ID",dataIndex:"id",key:"id"},{title:"Host",dataIndex:"host",key:"host"},{title:"Create Time",dataIndex:"createTime",key:"createTime",render:function(_){return g()(_*1e3).format()}},{title:"If Active",dataIndex:"ifApproved",key:"ifApproved",render:function(_){return _?"Active":"Inactive"}},{title:"Action",dataIndex:"id",key:"action",render:function(_){var c,O=function(){v(!0),(0,d.gY)(_,!I.get(_).ifApproved).then(function(D){D.code===200?(a.default.success("Change successfully!"),P(A)):a.default.error(D.message),v(!1)})},U=function(){v(!0),(0,d.IK)(_).then(function(D){D.code===200?(a.default.success("Delete successfully!"),P(A)):a.default.error(D.message),v(!1)})},M=(c=I.get(_))===null||c===void 0?void 0:c.ifApproved;return I.get(_)?(0,t.jsxs)(y.Z,{children:[M?(0,t.jsx)(u.Z,{type:"default",onClick:O,danger:!0,children:"Disable"}):(0,t.jsx)(u.Z,{type:"default",onClick:O,children:"Enable"}),(0,t.jsx)(u.Z,{type:"primary",onClick:U,danger:!0,children:(0,t.jsx)(W.Z,{})})]}):(0,t.jsx)(t.Fragment,{})}}],de=f.Z.useForm(),ie=(0,r.Z)(de,1),L=ie[0];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{title:"Fetch Node List"}),(0,t.jsx)(u.Z,{type:"primary",onClick:function(){x(!0)},style:{width:"150px",marginBottom:"20px"},children:"Create Node"}),(0,t.jsx)(T.Z,{dataSource:z,columns:oe,loading:ne,pagination:{defaultPageSize:9,defaultCurrent:A,total:X,showSizeChanger:!1,onChange:function(_){P(_)}}}),(0,t.jsx)(h.Z,{title:"Create New Fetch Node",visible:se,okButtonProps:{loading:ue},onOk:function(){L.submit()},onCancel:function(){x(!1)},children:(0,t.jsxs)(f.Z,{form:L,onFinish:function(_){H(!0),(0,d.dS)(_.host,_.password,"FETCH",_.username,_.authorUrl,_.postUrl,"").then(function(c){c.code===200?(a.default.success("Create successfully!"),x(!1),L.resetFields(),P(A)):a.default.error(c.message),H(!1)})},children:[(0,t.jsx)(f.Z.Item,{label:"Host",name:"host",rules:[{required:!0}],children:(0,t.jsx)(l.Z,{type:"text"})}),(0,t.jsx)(f.Z.Item,{label:"HTTP Basic Auth Username",name:"username",rules:[{required:!0}],children:(0,t.jsx)(l.Z,{type:"text"})}),(0,t.jsx)(f.Z.Item,{label:"HTTP Basic Auth Password",name:"password",rules:[{required:!0}],children:(0,t.jsx)(l.Z,{type:"password"})}),(0,t.jsx)(f.Z.Item,{label:"Author API",name:"authorUrl",rules:[{required:!0}],children:(0,t.jsx)(l.Z,{type:"text"})}),(0,t.jsx)(f.Z.Item,{label:"Post API",name:"postUrl",rules:[{required:!0}],children:(0,t.jsx)(l.Z,{type:"text"})})]})})]})}},73755:function(Z,E,e){"use strict";e.d(E,{sK:function(){return S},f5:function(){return T},uV:function(){return j},bS:function(){return f},dS:function(){return B},IK:function(){return y},gY:function(){return K}});var m=e(3182),h=e(94043),i=e.n(h),l=e(21010),S=function(){var u=(0,m.Z)(i().mark(function s(a,r){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)("/service/admin/list/",{method:"GET",params:{current:a,pageSize:r}}));case 1:case"end":return n.stop()}},s)}));return function(a,r){return u.apply(this,arguments)}}(),T=function(){var u=(0,m.Z)(i().mark(function s(a,r){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)("/service/admin/password/"+a+"/",{method:"POST",data:{password:r}}));case 1:case"end":return n.stop()}},s)}));return function(a,r){return u.apply(this,arguments)}}(),j=function(){var u=(0,m.Z)(i().mark(function s(a,r){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.WY)("/service/admin/create/",{method:"POST",data:{username:a,password:r}}));case 1:case"end":return n.stop()}},s)}));return function(a,r){return u.apply(this,arguments)}}(),f=function(){var u=(0,m.Z)(i().mark(function s(a,r,o){return i().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,l.WY)("/service/admin/node/list/"+o+"/",{method:"GET",params:{current:a,pageSize:r}}));case 1:case"end":return d.stop()}},s)}));return function(a,r,o){return u.apply(this,arguments)}}(),B=function(){var u=(0,m.Z)(i().mark(function s(a,r,o,n,d,C,g){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.WY)("/service/admin/node/create/"+o+"/",{method:"POST",data:{host:a,password:r,username:n,authorUrl:d,postUrl:C,nodeId:g}}));case 1:case"end":return t.stop()}},s)}));return function(a,r,o,n,d,C,g){return u.apply(this,arguments)}}(),y=function(){var u=(0,m.Z)(i().mark(function s(a){return i().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,l.WY)("/service/admin/node/delete/"+a+"/",{method:"DELETE"}));case 1:case"end":return o.stop()}},s)}));return function(a){return u.apply(this,arguments)}}(),K=function(){var u=(0,m.Z)(i().mark(function s(a,r){var o;return i().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=r?"1":"0",d.abrupt("return",(0,l.WY)("/service/admin/node/approved/"+a+"/",{method:"POST",data:{approved:o}}));case 2:case"end":return d.stop()}},s)}));return function(a,r){return u.apply(this,arguments)}}()}}]);
