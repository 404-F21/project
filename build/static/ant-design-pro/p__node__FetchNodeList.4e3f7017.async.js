(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[210],{78463:function(B,E,e){"use strict";var c=e(85893);E.Z=function(P){return(0,c.jsx)("div",{children:(0,c.jsx)("h2",{style:{marginBottom:"20px"},children:P.title})})}},40425:function(B,E,e){"use strict";e.r(E);var c=e(71194),P=e(5644),d=e(47673),m=e(1011),K=e(89816),A=e(6109),W=e(82471),p=e(84283),x=e(49111),T=e(19650),Z=e(57663),_=e(71577),r=e(34792),t=e(48086),n=e(2824),u=e(78463),a=e(67294),i=e(73755),v=e(30381),$=e.n(v),k=e(73171),s=e(85893);E.default=function(){var H=(0,a.useState)([]),U=(0,n.Z)(H,2),z=U[0],J=U[1],G=(0,a.useState)(1),R=(0,n.Z)(G,2),g=R[0],V=R[1],Q=(0,a.useState)(0),j=(0,n.Z)(Q,2),X=j[0],q=j[1],ee=(0,a.useState)(new Map),w=(0,n.Z)(ee,2),y=w[0],te=w[1],ae=(0,a.useState)(!1),N=(0,n.Z)(ae,2),ne=N[0],h=N[1],re=(0,a.useState)(!1),F=(0,n.Z)(re,2),se=F[0],I=F[1],_e=(0,a.useState)(!1),b=(0,n.Z)(_e,2),ue=b[0],Y=b[1],O=function(o){h(!0),(0,i.bS)(o,9,"FETCH").then(function(l){if(l.code===200){var M=new Map,S=new Map;l.data.data.forEach(function(D){M.set(D.id,D),S.set(D.id,!1)}),te(M),J(l.data.data),V(o),q(l.data.total)}else t.default.error(l.message);h(!1)})};(0,a.useEffect)(function(){O(1)},[]);var oe=[{title:"ID",dataIndex:"id",key:"id"},{title:"Host",dataIndex:"host",key:"host"},{title:"Create Time",dataIndex:"createTime",key:"createTime",render:function(o){return $()(o*1e3).format()}},{title:"If Active",dataIndex:"ifApproved",key:"ifApproved",render:function(o){return o?"Active":"Inactive"}},{title:"Action",dataIndex:"id",key:"action",render:function(o){var l,M=function(){h(!0),(0,i.gY)(o,!y.get(o).ifApproved).then(function(C){C.code===200?(t.default.success("Change successfully!"),O(g)):t.default.error(C.message),h(!1)})},S=function(){h(!0),(0,i.IK)(o).then(function(C){C.code===200?(t.default.success("Delete successfully!"),O(g)):t.default.error(C.message),h(!1)})},D=(l=y.get(o))===null||l===void 0?void 0:l.ifApproved;return y.get(o)?(0,s.jsxs)(T.Z,{children:[D?(0,s.jsx)(_.Z,{type:"default",onClick:M,danger:!0,children:"Disable"}):(0,s.jsx)(_.Z,{type:"default",onClick:M,children:"Enable"}),(0,s.jsx)(_.Z,{type:"primary",onClick:S,danger:!0,children:(0,s.jsx)(k.Z,{})})]}):(0,s.jsx)(s.Fragment,{})}}],de=p.Z.useForm(),ie=(0,n.Z)(de,1),L=ie[0];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{title:"Fetch Node List"}),(0,s.jsx)(_.Z,{type:"primary",onClick:function(){I(!0)},style:{width:"150px",marginBottom:"20px"},children:"Create Node"}),(0,s.jsx)(A.Z,{dataSource:z,columns:oe,loading:ne,pagination:{defaultPageSize:9,defaultCurrent:g,total:X,showSizeChanger:!1,onChange:function(o){O(o)}}}),(0,s.jsx)(P.Z,{title:"Create New Fetch Node",visible:se,okButtonProps:{loading:ue},onOk:function(){L.submit()},onCancel:function(){I(!1)},children:(0,s.jsxs)(p.Z,{form:L,onFinish:function(o){Y(!0),(0,i.dS)(o.host,o.password,"FETCH",o.username).then(function(l){l.code===200?(t.default.success("Create successfully!"),I(!1),L.resetFields(),O(g)):t.default.error(l.message),Y(!1)})},children:[(0,s.jsx)(p.Z.Item,{label:"Fetch API Address",name:"host",rules:[{required:!0}],children:(0,s.jsx)(m.Z,{type:"text"})}),(0,s.jsx)(p.Z.Item,{label:"HTTP Basic Auth Username",name:"username",rules:[{required:!0}],children:(0,s.jsx)(m.Z,{type:"text"})}),(0,s.jsx)(p.Z.Item,{label:"HTTP Basic Auth Password",name:"password",rules:[{required:!0}],children:(0,s.jsx)(m.Z,{type:"password"})})]})})]})}},73755:function(B,E,e){"use strict";e.d(E,{sK:function(){return K},f5:function(){return A},uV:function(){return W},bS:function(){return p},dS:function(){return x},IK:function(){return T},gY:function(){return Z}});var c=e(3182),P=e(94043),d=e.n(P),m=e(21010),K=function(){var _=(0,c.Z)(d().mark(function r(t,n){return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.WY)("/service/admin/list/",{method:"GET",params:{current:t,pageSize:n}}));case 1:case"end":return a.stop()}},r)}));return function(t,n){return _.apply(this,arguments)}}(),A=function(){var _=(0,c.Z)(d().mark(function r(t,n){return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.WY)("/service/admin/password/"+t+"/",{method:"POST",data:{password:n}}));case 1:case"end":return a.stop()}},r)}));return function(t,n){return _.apply(this,arguments)}}(),W=function(){var _=(0,c.Z)(d().mark(function r(t,n){return d().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.WY)("/service/admin/create/",{method:"POST",data:{username:t,password:n}}));case 1:case"end":return a.stop()}},r)}));return function(t,n){return _.apply(this,arguments)}}(),p=function(){var _=(0,c.Z)(d().mark(function r(t,n,u){return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.WY)("/service/admin/node/list/"+u+"/",{method:"GET",params:{current:t,pageSize:n}}));case 1:case"end":return i.stop()}},r)}));return function(t,n,u){return _.apply(this,arguments)}}(),x=function(){var _=(0,c.Z)(d().mark(function r(t,n,u,a){return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,m.WY)("/service/admin/node/create/"+u+"/",{method:"POST",data:{host:t,password:n,username:a}}));case 1:case"end":return v.stop()}},r)}));return function(t,n,u,a){return _.apply(this,arguments)}}(),T=function(){var _=(0,c.Z)(d().mark(function r(t){return d().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,m.WY)("/service/admin/node/delete/"+t+"/",{method:"DELETE"}));case 1:case"end":return u.stop()}},r)}));return function(t){return _.apply(this,arguments)}}(),Z=function(){var _=(0,c.Z)(d().mark(function r(t,n){var u;return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return u=n?"1":"0",i.abrupt("return",(0,m.WY)("/service/admin/node/approved/"+t+"/",{method:"POST",data:{approved:u}}));case 2:case"end":return i.stop()}},r)}));return function(t,n){return _.apply(this,arguments)}}()}}]);
